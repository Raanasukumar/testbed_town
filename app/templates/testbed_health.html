{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <h2>Welcome, {{ current_user.username }}!</h2>
    <p>Please choose a testbed from the dropdown menu below:</p>
    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            Choose Testbed
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            {% for file in testbed_files %}
            <li><a class="dropdown-item" href="#" data-file="{{ file }}">{{ file }}</a></li>
            {% endfor %}
        </ul>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const dropdownItems = document.querySelectorAll('.dropdown-item');
        dropdownItems.forEach(item => {
            item.addEventListener('click', function(event) {
                event.preventDefault();
                const file = this.getAttribute('data-file');
                window.location.href = `/testbed_health_device?file=${file}`;
            });
        });
    });
</script>
{% endblock %}
